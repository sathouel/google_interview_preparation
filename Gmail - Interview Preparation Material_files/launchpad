!function(){function t(t){function e(t){var e=(t.stack+"\n").replace(/^\S[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}()@$1").split("\n");return e.pop(),e}function o(t){return t.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n")}function n(t){var e,o,n,r=t.stacktrace,a=r.split("\n"),i="{anonymous}",c=/.*line (\d+), column (\d+) in ((<anonymous function\:?\s*(\S+))|([^\(]+)\([^\)]*\))(?: in )?(.*)\s*$/i;for(e=2,o=0,n=a.length;n-2>e;e++)if(c.test(a[e])){var l=RegExp.$6+":"+RegExp.$1+":"+RegExp.$2,u=RegExp.$3;u=u.replace(/<anonymous function\:?\s?(\S+)?>/g,i),a[o++]=u+"@"+l}return a.splice(o,a.length-o),a}function r(t){var e,o,n,r=t.message.split("\n"),a="{anonymous}",i=/Line\s+(\d+).*script\s+(http\S+)(?:.*in\s+function\s+(\S+))?/i;for(e=4,o=0,n=r.length;n>e;e+=2)i.test(r[e])&&(r[o++]=(RegExp.$3?RegExp.$3+"()@"+RegExp.$2+RegExp.$1:a+"()@"+RegExp.$2+":"+RegExp.$1)+" -- "+r[e+1].replace(/^\s+/,""));return r.splice(o,r.length-o),r}function a(t){for(var e=Array.prototype.slice,o=0;o<t.length;++o){var n=t[o];void 0===n?t[o]="undefined":null===n?t[o]="null":n.constructor&&(n.constructor===Array?t[o]=n.length<3?"["+a(n)+"]":"["+a(e.call(n,0,1))+"..."+a(e.call(n,-1))+"]":n.constructor===Object?t[o]="#object":n.constructor===Function?t[o]="#function":n.constructor===String&&(t[o]='"'+n+'"'))}return t.join(",")}function i(t){for(var e,o,n="{anonymous}",r=/function\s*([\w\-$]+)?\s*\(/i,i=[],c=10;t&&i.length<c;)e=r.test(t.toString())?RegExp.$1||n:n,o=Array.prototype.slice.call(t.arguments||[]),i[i.length]=e+"("+a(o)+")",t=t.caller;return i}return t.arguments&&t.stack?e(t):t.message&&"undefined"!=typeof window&&window.opera?t.stacktrace?n(t):r(t):t.stack?o(t):i(t)}function e(e,o){return function(){try{return o.apply(this,arguments)}catch(n){var r=n;if(!r||"object"!=typeof r)try{throw new Error(r)}catch(a){r=a}if(r.loggedByLoggily)throw r;var i={},l=t(r);l&&(i.backtrace=l.join("\n")),i.message=r&&r.message?r.message:""+r,c.error(e,"Rapportive exception: "+r,i),c.consoleLog("Rapportive exception: "+e+": "+r),i.backtrace&&c.consoleLog(i.backtrace);try{r.loggedByLoggily=!0}catch(u){}throw r}}}function o(t){var e={},o=1e4,n={all:0,debug:10,info:20,warn:30,warning:30,error:40,fatal:100};return t=t||{},e.log=function(e,o,r,a){if(void 0===r&&void 0===a)throw new Error("Please specify level, category and message");n[e]>=n[t.min_level||"warn"]},e.debug=function(t,o,n){e.log("debug",t,o,n)},e.info=function(t,o,n){e.log("info",t,o,n)},e.warning=e.warn=function(t,o,n){e.log("warning",t,o,n)},e.error=function(t,o,n){e.log("error",t,o,n)},e.fatal=function(t,o,n){e.log("fatal",t,o,n)},e.track=function(t,o,n){if(void 0!==n){var r={probability:n};for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a]);o=r}e.log("info","track",t,o)},e.consoleLog=function(o,n,r){var a=!t.in_iframe;try{a&&window.top&&window.top.console?window.top.console.log(o):window.console&&window.console.log(o)}catch(i){}e.silentLog(o,n,r)},e.silentLog=function(n,r,a){if(t.log_history){for(;t.log_history.length>o;)t.log_history.shift();t.log_history.push("["+(new Date).toGMTString()+"] "+n)}r&&e.log(a||"debug",r,n)},e}function n(t){function o(t,e,o,n){"function"==typeof t&&(t=t()),t&&l(t+" "+(e||""),o,n)}function n(){t.condition()?e(t.log_category+".success."+t.continuation.name,t.continuation)():i<t.max_poll_attempts?(i+=1,o(t.retry_message),window.setTimeout(e(t.log_category+".attempt.subsequent",n),t.poll_delay)):(e(t.log_category+".error."+t.error_continuation.name,t.error_continuation)(),o(t.failure_message,null,t.log_category,t.log_level_on_failure))}var r={poll_delay:200,max_poll_attempts:100,failure_message:"Ran out of delayedConditionalExecute search attempts -- giving up!",condition:function(){throw"No condition supplied to delayedConditionalExecute!"},continuation:function(){},error_continuation:function(){},log_level_on_failure:"error",log_level_on_error:null};for(var a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);if(t=r,!t.log_category)throw"delayedConditionalExecute needs a log_category";var i=0;e(t.log_category+".attempt.first",n)()}function r(){try{return document.getElementsByClassName("aic").length>0}catch(t){return!1}}function a(t){u.scriptTag({document:t,script_url:"https://rapportive.com/load/rapportive-997b016.js",script_id:"rapportiveApplication",loaded_indicator:"data-rapportive-loaded"})}function i(){var t,e;try{t=window.top.document,t.getElementById("canvas_frame")&&(e=t.getElementById("canvas_frame").contentDocument)}catch(o){}if(e){if(r(e))return l("Found canvas_frame"),a(e),!0;l("Ignoring canvas_frame because it has no compose button")}return t&&r(t)?(l("Found Gmail UI in top-level window"),a(t),!0):!1}document.documentElement.setAttribute("data-rapportive-launchpad","true");var c=o(),l=c.consoleLog,u={};u.scriptTag=function(t){function e(){return 1===r?i:i.replace(/(\?[^#]*)?(?=#|$)/,function(t){return(t?t+"&attempt=":"?attempt=")+encodeURIComponent(r)})}function o(){var t=a.getElementsByTagName("head")[0];if(t){var o=a.getElementById(c);o?r=Number(o.getAttribute("data-rapportive-attempt"))+1:(l("Loading "+c+"... (attempt "+r+")"),o=a.createElement("script"),o.type="text/javascript",o.src=e(),o.setAttribute("id",c),o.setAttribute("data-rapportive-attempt",r),o.addEventListener("error",function(){window.setTimeout(function(){t.removeChild(o)},5e3*r)},!1),t.appendChild(o),r+=1)}}var r=1,a=t.document||document,i=t.script_url,c=t.script_id,u=t.loaded_indicator,s=t.log_category||"gmail.loader.initialize";n({poll_delay:1e3,max_poll_attempts:200,failure_message:"Rapportive application injected, but failed to initialize",log_category:s,condition:function(){var t=a.getElementsByTagName("html")[0];return t&&"true"===t.getAttribute(u)?(l(u+" ok"),!0):(5>=r&&o(),!1)}})},n({poll_delay:1e3,max_poll_attempts:200,failure_message:"No suitable frame for Rapportive found",log_category:"gmail.loader.launchpad",log_level_on_failure:"debug",condition:i})}();
